<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>大事件-后台登录页</title>
  <link rel="stylesheet" type="text/css" href="css/reset.css">
  <link rel="stylesheet" type="text/css" href="css/iconfont.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body>
<div class="main_wrap">
  <div class="header">
    <a href="#" class="logo"><img src="images/logo.png" alt=""></a>
    <div class="copyright">CopyRight © 2019 深圳百秀信息技术股份有限公司<br>All Rights Reserved</div>
  </div>

  <div class="login_form_con">
    <div class="login_title"></div>
    <form class="login_form">
      <i class="iconfont icon-user"></i>
      <i class="iconfont icon-key"></i>
      <input type="text" class="input_txt" placeholder="邮箱/手机号">
      <input type="password" class="input_pass" placeholder="密码">
      <!--        <input type="submit" class="input_sub" value="登 录"> -->
      <input type="button" class="input_sub" value="登 录">
    </form>
  </div>

</div>

<script src="./js/jquery-1.12.4.min.js"></script>
<!--  引入配置文件-->
<script src="./tool/config.js"></script>
<!--  引入用户接口请求操作文件-->
<script src="./tool/user.js"></script>


<script>
  /*
  - 结构的修改：
      - 登录按钮是submit功能，希望使用ajax，应该为普通按钮。或者使用事件对象阻止元素的默认行为
    如a的跳转和submit的跳转
      - e.preventDefault()
      功能简介：
        1 点击登录按钮后，获取用户名和密码
        2 检测获取的内容是否为空
        3 如果不为空，通过接口发送给服务器端检测
        4 根据检测结果进行对应处理
          - 成功： 跳转到首页
          - 失败： 进行相关提示
  */

  /*
  实现功能
    1 给登录按钮添加点击事件
    2 获取用户名和密码并进行检测
    3 如果不为空则发送ajax请求
    4 改进接口地址，创建一个tool文件夹放配置文件
  */


  $('.input_sub').on('click', function (e) {
    e.preventDefault();
    var uname = $('.input_txt').val();
    var pwd = $('.input_pass').val();
    if (uname.trim() === '' || pwd.trim() === '') {
      alert('输入的用户名或密码不能为空，请重新输入');
    } else {
      user.login({
        data: {
          user_name: uname,
          password: pwd,
        },
        callback: function (res) {
          console.log(res);
          if (res.code === 200) {
            location.href = './index.html';
          } else {
            alert('输入的用户名或密码错误，请重新输入');
          }
        }
      });
    }
  })


</script>
</body>

</html>